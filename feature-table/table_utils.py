from __future__ import print_function
import math
import os
import shelve

TABLE = "table"
DATA = "data"
CLASS = "class"
FILE_NAMES = "files"
FEATURE_NAMES = "features"

CLASS_MAL = 'M'
CLASS_BEN = 'B'


def convertToNumber(s):
    return int.from_bytes(s.encode(), 'little')


def convertFromNumber(n):
    return n.to_bytes(math.ceil(n.bit_length() / 8), 'little').decode()


def read_table(file):
    data = shelve.open(file)
    table = data[TABLE]
    features = data[FEATURE_NAMES]
    data.close()
    return table, features


def find_element_in_list(element, list_element):
    try:
        index_element = list_element.index(element)
        return index_element
    except ValueError:
        return None


def read_file(file):
    lines = []

    with open(file, 'r') as f:
        for line in f:
            index = lines.append(line.rstrip('\n'))

    return lines


def make_table_dict(input_dir, label):
    files = os.listdir(input_dir)
    table = {}

    index = 0
    for file in files:
        file_name = os.path.splitext(os.path.basename(file))[0]
        lines = read_file(os.path.join(input_dir, file))

        table[file_name] = {DATA: [], CLASS: label}
        for line in lines:
            table[file_name][DATA].append(line)

    return table


def main():
    test_string = "Hello World!"

    test_num = convertToNumber(test_string)
    print(test_num)
    print(test_string)


if __name__ == "__main__":
    main()
